{% extends 'base.html' %}
{% block content %}
    <head>
        <title>Oh wow a website!</title>
    </head>
    <body>
      <div class="container">
        <div class="row">
          <div id="wallet_add">
            <div>
              <span><form action="/wallet-processing" method="GET" id="wallet">
                Wallet Address : <input type="text" id="wallet_id">
                Alias(optional) : <input type="text" id="alias">
                <input type="submit" value="Add wallet">
                </form></span>

        </div>
  </div>
        <div class="row">
          <span id="show-results"><p></p></span>
<script>
  function handleFormSubmission () {
    $('#wallet').on('submit', (evt) => {
      evt.preventDefault();
      console.log('Event cancelled');

      let walletId = document.getElementById("wallet_id").value;
      let alias = document.getElementById("alias").value;
      console.log(walletId);
    
    $.get('/wallet-processing.json?wallet_id=' + walletId, (response) => {
      const results = response;
      console.log(results);
      handleJsonResponse(results);
      });
    });
  }
  function handleJsonResponse (results) {
    for (let [key, value] of Object.entries(results)) {
      console.log(key, value);
      for (let [innerKey, innerValue] of Object.entries(value)){
        console.log(innerKey, innerValue)
        $('#show-results').html('please work ' + innerKey + innerValue)
      };
    };
  }

  handleFormSubmission();
</script>

{% endblock %}